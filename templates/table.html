{% extends "base.html" %}

{% block title %}Current TimeState{% endblock %}

{% block head %}
    <link rel='stylesheet' href="{{ url_for("static", filename="table.css") }}" />
    <link rel='stylesheet' href="{{ url_for("static", filename="actions.css") }}" />
    <link href='http://fonts.googleapis.com/css?family=Lato:300' rel='stylesheet' type='text/css'>
    <script src="{{ url_for("static", filename="main.js") }}"></script>
{% endblock %}

{% block content %}
<div id="actions">
    <div id='in'>in</div>
    <div id='custom'>custom</div>
    <div id='out'>out</div>
</div>

<table>
    <thead>
    <tr>
        <th></th>
        <th>in</th>
        <th>out</th>
        <th>hours</th>
    </tr>
    </thead>
{% for item in tbody %}
    {% if item['type'] == "weekheader" %}
    <tr>
        <th colspan='4' class='weekheader'><span class='label-week'>wk.</span>
        {{ item['week']}} 
        <span class='weekspan'>({{ item['start'] }} - {{ item['end'] }})</span></th>
    {% elif item['type'] == "weekfooter" %}
    <tr>
        <th colspan='3' class='label-total'>subtotal:</th><th class='sum'>{{ item['sum'] }}</th>
    {% else %}
    <tr title="entry {{ item['idx'] }}" entry="{{ item['idx'] }}">
        <td class="day">
        {% for day in daystring %}
            <span class='{% if loop.index != item['day'] %}un{% endif %}selected'>
                {{ day }}
            </span>
        {% endfor %}
        </td>
        <td class="in" contenteditable='true' 
            data="{{ item['in'] }}">{{ item['in'] }}
        </td>
        <td class="out"
            predict="{{ item['predict'] }}"
            contenteditable='{% if item['out'] != "-" %}true{% else %}false{% endif %}' 
            data="{{ item['out'] }}">{{ item['out'] }}
        </td>
        <td class="hours">{{ item['hours'] }}</td>
    {% endif %}
    </tr>
{% endfor %}
</table>
{% endblock %}
